<!-- Menu de NavegaÃ§Ã£o -->
<nav style="position: fixed; top: 0; left: 0; right: 0; background: #2d3748; color: white; padding: 1rem; z-index: 10000; display: flex; gap: 1rem; align-items: center;">
  <a routerLink="/" style="color: white; text-decoration: none; padding: 0.5rem 1rem; background: #667eea; border-radius: 4px;">ğŸ  Home</a>
  <a routerLink="/admin" style="color: white; text-decoration: none; padding: 0.5rem 1rem; background: #38a169; border-radius: 4px;">âš™ï¸ Admin</a>
  <a routerLink="/display" style="color: white; text-decoration: none; padding: 0.5rem 1rem; background: #4a5568; border-radius: 4px;">ğŸ¯ Display</a>
  <a routerLink="/visor" style="color: white; text-decoration: none; padding: 0.5rem 1rem; background: #4a5568; border-radius: 4px;">ğŸ“º Visor</a>
  <span style="margin-left: auto; font-size: 0.9rem; opacity: 0.8;">ğŸ¦ Painel de Gelateria</span>
</nav>

<div class="admin" style="margin-top: 4rem;">
  <h1>ğŸ¦ Painel Administrativo</h1>

  <!-- ConfiguraÃ§Ãµes de ExibiÃ§Ã£o -->
  <section class="section">
    <h2>âš™ï¸ ConfiguraÃ§Ãµes de ExibiÃ§Ã£o</h2>
    
    <div class="form-group">
      <label>URL da Logo</label>
      <input [(ngModel)]="logoUrl" placeholder="https://exemplo.com/logo.png" />
      <div style="margin-top: 0.75rem;">
        <button class="btn btn-primary" (click)="updateLogoUrl()">ğŸ’¾ Salvar Logo</button>
      </div>
    </div>

    <div class="color-picker-container">
      <label>ğŸ¨ Cor dos TÃ­tulos</label>
      <input type="color" [(ngModel)]="titleColor" />
      <button class="btn btn-primary" (click)="updateTitleColor()">ğŸ’¾ Salvar Cor</button>
    </div>

    <div class="checkbox-container">
      <input type="checkbox" [(ngModel)]="showGridLines" (change)="updateShowGridLines()" id="showGridLines" />
      <label for="showGridLines">ğŸ“ Exibir linhas do grid no visor</label>
    </div>
  </section>

  <section class="section">
    <h2>ğŸ“‚ Categorias</h2>
    <div class="form-group">
      <label>Nova Categoria</label>
      <input [(ngModel)]="newCategoryName" placeholder="Digite o nome da categoria" />
      <div style="margin-top: 0.75rem;">
        <button class="btn btn-success" (click)="addCategory()">â• Adicionar Categoria</button>
      </div>
    </div>

    <div class="list">
      <div class="list-item" *ngFor="let c of categories()">
        <!-- Modo visualizaÃ§Ã£o -->
        <span *ngIf="editingCategory() !== c.id">{{ c.name }}</span>
        <!-- Modo ediÃ§Ã£o -->
        <div *ngIf="editingCategory() === c.id" class="edit-form">
          <input [(ngModel)]="editCategoryName" placeholder="Nome da categoria" class="edit-input" />
        </div>
        <div class="actions">
          <!-- BotÃµes modo visualizaÃ§Ã£o -->
          <button *ngIf="editingCategory() !== c.id" class="btn-edit" (click)="startEditCategory(c)">âœï¸ Editar</button>
          <button *ngIf="editingCategory() !== c.id" class="btn-delete" (click)="removeCategory(c)">ğŸ—‘ï¸ Excluir</button>
          <!-- BotÃµes modo ediÃ§Ã£o -->
          <button *ngIf="editingCategory() === c.id" class="btn-success" (click)="saveCategoryEdit(c.id)">ğŸ’¾ Salvar</button>
          <button *ngIf="editingCategory() === c.id" class="btn-danger" (click)="cancelCategoryEdit()">âŒ Cancelar</button>
        </div>
      </div>
      <div class="empty-state" *ngIf="categories().length === 0">
        Nenhuma categoria cadastrada
      </div>
    </div>
  </section>


  <section class="section">
    <h2>ğŸ·ï¸ TÃ­tulos</h2>
    <div class="form-group">
      <label>Novo TÃ­tulo</label>
      <input [(ngModel)]="newTitleName" placeholder="Digite o nome do tÃ­tulo" />
      <div style="margin-top: 0.75rem;">
        <button class="btn btn-success" (click)="addTitle()">â• Adicionar TÃ­tulo</button>
      </div>
    </div>

    <div class="list">
      <div class="list-item" *ngFor="let t of titles()">
        <!-- Modo visualizaÃ§Ã£o -->
        <span *ngIf="editingTitle() !== t.id">{{ t.name }}</span>
        <!-- Modo ediÃ§Ã£o -->
        <div *ngIf="editingTitle() === t.id" class="edit-form">
          <input [(ngModel)]="editTitleName" placeholder="Nome do tÃ­tulo" class="edit-input" />
        </div>
        <div class="actions">
          <!-- BotÃµes modo visualizaÃ§Ã£o -->
          <button *ngIf="editingTitle() !== t.id" class="btn-edit" (click)="startEditTitle(t)">âœï¸ Editar</button>
          <button *ngIf="editingTitle() !== t.id" class="btn-delete" (click)="removeTitle(t)">ğŸ—‘ï¸ Excluir</button>
          <!-- BotÃµes modo ediÃ§Ã£o -->
          <button *ngIf="editingTitle() === t.id" class="btn-success" (click)="saveTitleEdit(t.id)">ğŸ’¾ Salvar</button>
          <button *ngIf="editingTitle() === t.id" class="btn-danger" (click)="cancelTitleEdit()">âŒ Cancelar</button>
        </div>
      </div>
      <div class="empty-state" *ngIf="titles().length === 0">
        Nenhum tÃ­tulo cadastrado
      </div>
    </div>
  </section>

  <section class="section">
    <h2>ğŸ–¼ï¸ Imagens</h2>
    <div class="form-group">
      <label>Nome da Imagem</label>
      <input [(ngModel)]="newImageName" placeholder="Digite o nome da imagem" />
    </div>
    <div class="form-group">
      <label>URL da Imagem</label>
      <input [(ngModel)]="newImageUrl" placeholder="https://exemplo.com/imagem.jpg" />
    </div>
    <div class="form-group">
      <label>Categoria</label>
      <select [(ngModel)]="newImageCategoryId">
        <option value="">Selecione uma categoria</option>
        <option *ngFor="let c of categories()" [ngValue]="c.id">{{ c.name }}</option>
      </select>
    </div>
    <button class="btn btn-success" (click)="addImage()">â• Adicionar Imagem</button>

    <!-- Campo de busca de imagens -->
    <div class="search-container" style="margin: 1.5rem 0;">
      <input 
        type="text" 
        [value]="searchImagesTerm()" 
        (input)="updateImagesSearchTerm($any($event.target).value)"
        placeholder="ğŸ” Buscar imagens..." 
        class="search-input"
        style="width: 100%; padding: 0.5rem; border: 1px solid #e2e8f0; border-radius: 4px; font-size: 0.9rem;"
      />
    </div>

    <div class="images-grid" *ngFor="let group of imagesByCategory()">
      <h3 class="cat-title">{{ group.category.name }}</h3>
      <div class="image-item" *ngFor="let i of group.images">
        <img [src]="i.url" [alt]="i.name" />
        <!-- Modo visualizaÃ§Ã£o -->
        <div *ngIf="editingImage() !== i.id">
          <div class="image-name">{{ i.name }}</div>
          <div class="image-category">{{ group.category.name }}</div>
        </div>
        <!-- Modo ediÃ§Ã£o -->
        <div *ngIf="editingImage() === i.id" class="edit-form">
          <input [(ngModel)]="editImageName" placeholder="Nome da imagem" class="edit-input" />
          <input [(ngModel)]="editImageUrl" placeholder="URL da imagem" class="edit-input" />
          <select [(ngModel)]="editImageCategory" class="edit-select">
            <option *ngFor="let c of categories()" [ngValue]="c.id">{{ c.name }}</option>
          </select>
        </div>
        <div class="actions">
          <!-- BotÃµes modo visualizaÃ§Ã£o -->
          <button *ngIf="editingImage() !== i.id" class="btn-edit" (click)="startEditImage(i)">âœï¸ Editar</button>
          <button *ngIf="editingImage() !== i.id" class="btn-delete" (click)="removeImage(i)">ğŸ—‘ï¸ Excluir</button>
          <!-- BotÃµes modo ediÃ§Ã£o -->
          <button *ngIf="editingImage() === i.id" class="btn-success" (click)="saveImageEdit(i.id)">ğŸ’¾ Salvar</button>
          <button *ngIf="editingImage() === i.id" class="btn-danger" (click)="cancelImageEdit()">âŒ Cancelar</button>
        </div>
      </div>
    </div>
    
    <!-- Mensagem quando nÃ£o hÃ¡ resultados de busca -->
    <div *ngIf="imagesByCategory().length === 0 && searchImagesTerm().trim()" class="no-results" style="text-align: center; padding: 1rem; color: #718096; font-style: italic;">
      ğŸ” Nenhuma imagem encontrada para "{{ searchImagesTerm() }}"
    </div>
    
    <div class="empty-state" *ngIf="images().length === 0">
      Nenhuma imagem cadastrada
    </div>
  </section>
</div>


